## 1. 需求概述

### 1.1 需求名称
- **页面名称**：工单详情页面

### 1.2 需求目标
为服务人员提供一个查看工单详细信息的页面，通过查询CRM系统中的工单数据，大模型自动生成工单解决方案，提高工作效率。

### 1.3 技术架构
- **技术栈**: Vite + React + TypeScript
- **UI组件库**: shadcn/ui - 基于Radix UI的现代组件库
- **样式**：Tailwind CSS

### 1.4 项目目录结构
```
crm/
├── public/                     # 静态资源目录
│   ├── favicon.ico
│   ├── placeholder.svg
│   └── robots.txt
├── src/                        # 源代码目录
│   ├── components/             # 组件目录
│   │   ├── ui/                # shadcn/ui组件库，包含40个UI组件
│   │   ├── AppSidebar.tsx     # 侧边栏导航组件
│   │   └── Layout.tsx         # 页面布局组件，包含头部和侧边栏
│   ├── pages/                 # 各页面组件目录
│   │   ├── Dashboard.tsx      # 仪表板页面
│   │   ├── Customers.tsx      # 客户管理页面
│   │   ├── Leads.tsx          # 线索管理页面
│   │   ├── Contacts.tsx       # 联系人管理页面
│   │   ├── Index.tsx          # 首页
│   │   └── NotFound.tsx       # 404页面
│   ├── hooks/                 # 自定义React Hooks
│   │   ├── use-mobile.tsx
│   │   └── use-toast.ts
│   ├── lib/                   # 工具函数库
│   │   └── utils.ts          # 工具函数，包含样式合并等通用方法
│   ├── App.tsx               # 应用主组件，配置路由和全局状态
│   ├── main.tsx              # 应用入口，React应用挂载点
│   ├── index.css             # 全局样式文件
│   └── vite-env.d.ts         # Vite环境类型声明
├── package.json               # 项目依赖配置
├── vite.config.ts            # Vite构建配置
├── tailwind.config.ts        # Tailwind CSS配置
├── tsconfig.json             # TypeScript配置
├── eslint.config.js          # ESLint代码规范配置
├── components.json           # shadcn/ui组件配置
├── postcss.config.js         # PostCSS配置
└── index.html                # HTML入口文件
```

## 2. 功能需求

### 2.1 核心功能模块

#### 2.1.1 工单查询模块
**功能描述**: 通过工单描述查询一条工单信息

**输入参数**:
- 工单描述（必选，支持模糊匹配）

**规则**:
- 必须输入查询条件

#### 2.1.3 工单列表
**功能描述**: 
统计卡片：显示各状态工单数量统计
搜索功能：支持按标题、描述、处理人员搜索
工单列表展示：支持按状态筛选（全部、待处理、处理中、已解决、已关闭）
工单创建：包含标题、描述、分类、状态、优先级、分配给、负责人、日期等字段
工单编辑：可编辑工单的所有信息
工单详情：点击工单可展开查看详细信息

**字段**: 
标题
描述
分类
状态
优先级
分配给
负责人
日期

**字段值列表**: 
1. 状态
待处理：新创建的工单
处理中：正在处理的工单
已解决：问题已解决但未关闭
已关闭：工单完全关闭

2. 优先级
低、中、高、紧急四个优先级
不同优先级使用不同颜色标识

3. 分类
技术支持、功能请求、Bug报告、账户问题、计费问题、其他


#### 2.1.2 工单详情
**功能描述**: 以表单形式，展示查询条件匹配到的结果中，第一条工单的信息

**字段**:
和工单列表一致
标题、描述、分类、状态、优先级、分配给、负责人、日期

#### 2.1.4 推荐解决方案
**功能描述**: 基于工单的描述，自动生成解决方案建议
1. 支持Markdown解析
2. 支持大模型流式输出，对话框自动滚动

#### 2.1.5 业务逻辑
**处理流程**:
1. 根据查询条件，查询所有工单
3. 将所有的工单显示在工单列表中
2. 将第一条工单显示在工单详情中
5. 大模型提示词 = 工单描述 + "\n请根据以上内容，推荐工单解决方案建议，简明扼要，突出重点。\n请使用Markdown格式输出:"
6. 调用豆包API，实时流式显示生成结果，显示在推荐解决方案的文本框中

**异常处理**:
- API调用失败时显示错误提示
- 实现错误处理和异常情况处理


### 2.2 页面布局
统计卡片
─────────────────────
查询条件
─────────────────────
工单列表
─────────────────────
工单详情 | 推荐解决方案


## 3. 生成代码步骤
1.创建页面组件
2.在侧边栏添加菜单项
3.在App.tsx中添加路由配置
4.实现各个业务功能
5.更新仪表板的业务指标